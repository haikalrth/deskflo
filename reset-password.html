<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reset Kata Sandi - DeskFlo</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />

    <style>
      body {
        font-family: "Inter", sans-serif;
      }
      .auth-panel {
        width: 100%;
        max-width: 1000px;
        height: 650px;
      }
      .notification-popup {
        transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
      }
    </style>
  </head>
  <body class="bg-gray-100 flex items-center justify-center min-h-screen p-6">
    <div class="auth-panel relative flex flex-col bg-white shadow-2xl rounded-2xl md:flex-row md:space-y-0">
      <!-- Kolom Kiri (Branding) -->
      <div class="relative w-full md:w-1/2">
        <div class="p-8 md:p-14 h-full flex flex-col justify-between bg-gradient-to-br from-purple-600 via-indigo-600 to-indigo-800 rounded-2xl text-white">
          <div class="flex items-center space-x-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="16" y1="2" x2="16" y2="6"></line>
              <line x1="8" y1="2" x2="8" y2="6"></line>
              <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
            <span class="text-2xl font-bold">DeskFlo</span>
          </div>
          <div class="my-10">
            <h1 class="text-4xl md:text-5xl font-bold leading-tight">Satu Langkah Lagi Menuju Keamanan.</h1>
            <p class="mt-4 text-indigo-200">Buat kata sandi baru yang kuat untuk melindungi akun Anda.</p>
          </div>
          <div class="w-full">
            <svg viewBox="0 0 350 200" xmlns="http://www.w3.org/2000/svg">
              <g opacity="0.8">
                <rect x="50" y="50" width="250" height="130" rx="15" fill="#ffffff" fill-opacity="0.1" />
                <rect x="65" y="70" width="80" height="10" rx="5" fill="#ffffff" fill-opacity="0.5" />
                <rect x="65" y="90" width="150" height="8" rx="4" fill="#ffffff" fill-opacity="0.3" />
                <rect x="65" y="110" width="120" height="8" rx="4" fill="#ffffff" fill-opacity="0.3" />
                <circle cx="270" cy="80" r="15" fill="#ec4899" />
                <circle cx="250" cy="80" r="15" fill="#8b5cf6" />
              </g>
            </svg>
          </div>
        </div>
      </div>

      <!-- Kolom Kanan (Form) -->
      <div class="flex flex-col justify-center p-8 md:p-14 w-full md:w-1/2">
        <h2 class="font-bold text-3xl text-gray-800">Reset Kata Sandi</h2>
        <p class="mt-2 text-gray-600">Buat kata sandi baru Anda.</p>
        <form id="reset-password-form" class="mt-8 space-y-6">
          <div>
            <label for="new-password" class="block text-sm font-medium text-gray-700">Kata Sandi Baru</label>
            <div class="relative mt-1">
              <input
                type="password"
                id="new-password"
                name="new-password"
                placeholder="••••••••"
                class="password-field block w-full px-4 py-3 border border-slate-300 rounded-lg shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                required
              />
              <span class="absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer toggle-password">
                <svg class="h-5 w-5 text-gray-400 eye-open" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
                  <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.022 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />
                </svg>
                <svg class="h-5 w-5 text-gray-400 eye-closed hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
                  <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.022 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />
                  <path d="M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.955 9.955 0 00-4.512 1.074L3.707 2.293z" />
                </svg>
              </span>
            </div>
          </div>
          <div>
            <label for="confirm-password" class="block text-sm font-medium text-gray-700">Konfirmasi Kata Sandi Baru</label>
            <div class="relative mt-1">
              <input
                type="password"
                id="confirm-password"
                name="confirm-password"
                placeholder="••••••••"
                class="password-field block w-full px-4 py-3 border border-slate-300 rounded-lg shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                required
              />
              <span class="absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer toggle-password">
                <svg class="h-5 w-5 text-gray-400 eye-open" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
                  <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.022 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />
                </svg>
                <svg class="h-5 w-5 text-gray-400 eye-closed hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
                  <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.022 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />
                  <path d="M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.955 9.955 0 00-4.512 1.074L3.707 2.293z" />
                </svg>
              </span>
            </div>
            <p id="password-match-message" class="text-xs text-emerald-600 mt-2 hidden">
              <svg class="inline w-4 h-4 mr-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
              </svg>
              Kata sandi cocok.
            </p>
          </div>
          <div>
            <button
              type="submit"
              class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-300"
            >
              Simpan Kata Sandi Baru
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Notifikasi Pop-up -->
    <div id="notification-popup" class="fixed bottom-5 right-5 text-white py-3 px-5 rounded-lg shadow-lg transform translate-y-20 opacity-0 notification-popup z-50">
      <div class="flex items-center">
        <div id="notification-icon" class="mr-3"></div>
        <div>
          <p id="notification-title" class="font-semibold"></p>
          <p id="notification-message" class="text-sm"></p>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const resetForm = document.getElementById("reset-password-form");
        const newPasswordInput = document.getElementById("new-password");
        const confirmPasswordInput = document.getElementById("confirm-password");
        const passwordMatchMessage = document.getElementById("password-match-message");
        const notificationPopup = document.getElementById("notification-popup");

        const showNotification = (title, message, type = "success") => {
          if (notificationPopup) {
            const iconContainer = document.getElementById("notification-icon");

            // Reset classes
            notificationPopup.classList.remove("bg-emerald-500", "bg-rose-500");

            if (type === "success") {
              notificationPopup.classList.add("bg-emerald-500");
              iconContainer.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>`;
            } else if (type === "error") {
              notificationPopup.classList.add("bg-rose-500");
              iconContainer.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>`;
            }

            document.getElementById("notification-title").textContent = title;
            document.getElementById("notification-message").textContent = message;
            notificationPopup.classList.remove("opacity-0", "translate-y-20");
            setTimeout(() => {
              notificationPopup.classList.add("opacity-0", "translate-y-20");
            }, 4000);
          }
        };

        const checkPasswordMatch = () => {
          if (confirmPasswordInput.value.length > 0 && newPasswordInput.value === confirmPasswordInput.value) {
            passwordMatchMessage.classList.remove("hidden");
          } else {
            passwordMatchMessage.classList.add("hidden");
          }
        };

        if (newPasswordInput) newPasswordInput.addEventListener("input", checkPasswordMatch);
        if (confirmPasswordInput) confirmPasswordInput.addEventListener("input", checkPasswordMatch);

        if (resetForm) {
          resetForm.addEventListener("submit", (e) => {
            e.preventDefault();
            if (newPasswordInput.value !== confirmPasswordInput.value) {
              showNotification("Gagal!", "Konfirmasi kata sandi tidak cocok.", "error");
              return;
            }
            showNotification("Berhasil!", "Kata sandi Anda telah berhasil direset.");
            setTimeout(() => {
              window.location.href = "authentication.html";
            }, 1500);
          });
        }

        const togglePasswordIcons = document.querySelectorAll(".toggle-password");
        togglePasswordIcons.forEach((icon) => {
          icon.addEventListener("click", function () {
            const input = this.parentElement.querySelector("input");
            const eyeOpen = this.querySelector(".eye-open");
            const eyeClosed = this.querySelector(".eye-closed");
            if (input.type === "password") {
              input.type = "text";
              eyeOpen.classList.add("hidden");
              eyeClosed.classList.remove("hidden");
            } else {
              input.type = "password";
              eyeOpen.classList.remove("hidden");
              eyeClosed.classList.add("hidden");
            }
          });
        });
      });
    </script>
  </body>
</html>
